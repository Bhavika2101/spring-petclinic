# ********RoostGPT********

# Test generated by RoostGPT for test hsbc-simulation-api using AI Type Open AI and AI Model gpt-4
# 
# Test generated for /funds-confirmations_post for http method type POST in artillery framework
# RoostTestHash=e31facdc08
# 
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "funds-confirmations_post_success.csv"
    fields:
      - "ConsentId"
      - "Reference"
      - "Amount"
      - "Currency"
    skipHeader: true
  environments:
    development:
      target: "{{ $processEnvironment.API_HOST }}"
      variables:
        AUTH_TOKEN: "{{ $processEnvironment.AUTH_TOKEN }}"
scenarios:
  - name: "Post Fund Confirmation"
    flow:
      - post:
          url: "/funds-confirmations"
          headers:
            Content-Type: "application/json"
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
            x-fapi-auth-date: "{{ $processEnvironment.x_fapi_auth_date }}"
            x-fapi-customer-ip-address: "{{ $processEnvironment.x_fapi_customer_ip_address }}"
            x-fapi-interaction-id: "{{ $processEnvironment.x_fapi_interaction_id }}"
            x-customer-user-agent: "{{ $processEnvironment.x_customer_user_agent }}"
          json:
            Data:
              ConsentId: "{{ ConsentId }}"
              Reference: "{{ Reference }}"
              InstructedAmount:
                Amount: "{{ Amount }}"
                Currency: "{{ Currency }}"
          expect:
            - statusCode: 201
            - hasProperty: "Data"
            - hasProperty: "Data.FundsConfirmationId"
            - hasProperty: "Data.ConsentId"
            - hasProperty: "Data.CreationDateTime"
            - hasProperty: "Data.FundsAvailable"
            - hasProperty: "Data.Reference"
            - hasProperty: "Data.InstructedAmount"
            - hasProperty: "Data.InstructedAmount.Amount"
            - hasProperty: "Data.InstructedAmount.Currency"
            - hasProperty: "Links"
            - hasProperty: "Links.Self"
            - hasHeader: "x-fapi-interaction-id"
      - think: 1
