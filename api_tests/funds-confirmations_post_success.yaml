# ********RoostGPT********

# Test generated by RoostGPT for test hsbc-simulation-api using AI Type Open AI and AI Model gpt-4
# 
# Test generated for /funds-confirmations_post for http method type POST in artillery framework
# RoostTestHash=e31facdc08
# 
# 

# ********RoostGPT********
config:
  target: ${process.env.API_HOST}
  plugins:
    expect: {}
  payload:
    path: "funds-confirmations_post_success.csv"
    fields:
      - "ConsentId"
      - "Reference"
      - "Amount"
      - "Currency"
  phases:
    - duration: 60
      arrivalRate: 20

scenarios:
  - name: "Funds Confirmations POST Success"
    flow:
      - post:
          url: "/funds-confirmations"
          headers:
            Authorization: "Bearer ${process.env.AUTH_TOKEN}"
            x-fapi-auth-date: "{{$timestamp}}"
            x-fapi-customer-ip-address: "192.168.1.1"
            x-fapi-interaction-id: "{{ $uuid }}"
            x-customer-user-agent: "Artillery Test"
          json:
            Data:
              ConsentId: "{{ ConsentId }}"
              Reference: "{{ Reference }}"
              InstructedAmount:
                Amount: "{{ Amount }}"
                Currency: "{{ Currency }}"
          expect:
            - statusCode: 201
            - hasProperty: "Data"
            - hasProperty: "Data.FundsConfirmationId"
            - hasProperty: "Data.ConsentId"
            - hasProperty: "Data.CreationDateTime"
            - hasProperty: "Data.FundsAvailable"
            - hasProperty: "Data.Reference"
            - hasProperty: "Data.InstructedAmount"
            - hasProperty: "Data.InstructedAmount.Amount"
            - hasProperty: "Data.InstructedAmount.Currency"
            - hasProperty: "Links"
            - hasProperty: "Links.Self"
            - hasHeader: "x-fapi-interaction-id"
      - think: 1
