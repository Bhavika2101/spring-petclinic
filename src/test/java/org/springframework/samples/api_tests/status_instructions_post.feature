# ********RoostGPT********

# Test generated by RoostGPT for test hsbc-api-karate using AI Type Open AI and AI Model gpt-4
# 
# Feature file generated for /status/instructions_post for http method type POST 
# RoostTestHash=29c28aa003
# 
# 

# ********RoostGPT********
Feature: Test /status/instructions endpoint

Background:
  * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
  * url urlBase

Scenario Outline: Test POST /status/instructions endpoint with valid payload
  Given path '/status/instructions'
  And header Authorization = '<authToken>'
  And header x-fapi-customer-ip-address = '123.123.123.123'
  And header x-fapi-auth-date = '2022-01-01'
  And header x-fapi-interaction-id = 'abc123'
  And header x-idempotency-key = 'xyz123'
  And request {"merchantInstructionIdentification": "<merchantInstructionIdentification>", "creditorAccount": {"bankCode": "<bankCode>", "accountIdentification": "<accountIdentification>", "currency": "<currency>", "accountSchemeName": "<accountSchemeName>", "accountSubType": "<accountSubType>"}}
  When method post
  Then status 201
  And match response.paymentInformationStatus == '<paymentInformationStatus>'
  And match response.processResult.responseCode == '<responseCode>'
  And match response.transactionIdentification == '<transactionIdentification>'

  Examples:
    | merchantInstructionIdentification | bankCode | accountIdentification | currency | accountSchemeName | accountSubType | paymentInformationStatus | responseCode | transactionIdentification | authToken |
    | '123'                             | 'HSBC'   | '000123456789'        | 'USD'    | 'Scheme1'         | 'Type1'        | 'Success'                | '201'        | 'Transaction123'          | '{{$processEnvironment.AUTH_TOKEN}}' |

Scenario Outline: Test POST /status/instructions endpoint with invalid payload
  Given path '/status/instructions'
  And header Authorization = '<authToken>'
  And header x-fapi-customer-ip-address = '123.123.123.123'
  And header x-fapi-auth-date = '2022-01-01'
  And header x-fapi-interaction-id = 'abc123'
  And header x-idempotency-key = 'xyz123'
  And request {"merchantInstructionIdentification": "<merchantInstructionIdentification>", "creditorAccount": {"bankCode": "<bankCode>", "accountIdentification": "<accountIdentification>", "currency": "<currency>", "accountSchemeName": "<accountSchemeName>", "accountSubType": "<accountSubType>"}}
  When method post
  Then status 400
  And match response.id == '<id>'
  And match response.errors[0].code == '<errorCode>'
  And match response.errors[0].causes == '<errorCauses>'

  Examples:
    | merchantInstructionIdentification | bankCode | accountIdentification | currency | accountSchemeName | accountSubType | id   | errorCode | errorCauses | authToken |
    | '123'                             | 'HSBC'   | '000123456789'        | 'USD'    | 'Scheme1'         | 'Type1'        | '1'  | '400'     | 'Bad Request' | '{{$processEnvironment.AUTH_TOKEN}}' |
